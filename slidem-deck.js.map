{"version":3,"sources":["slidem-deck.js"],"names":["GluonElement","html","onRouteChange","currentPath","currentHash","fontNode","document","createElement","href","rel","head","appendChild","styleText","createTextNode","styleNode","SlidemDeck","template","connectedCallback","slides","Array","from","getElementsByTagName","forEach","_steps","$","progress","previousSlide","active","children","classList","remove","currentSlide","step","currentStep","add","forward","onclick","reveals","length","window","history","pushState","dispatchEvent","Event","backward","removeAttribute","setTimeout","match","customElements","define","is"],"mappings":"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","file":"slidem-deck.js","sourcesContent":["import { GluonElement, html } from '../gluonjs/gluon.js';\nimport { onRouteChange, currentPath, currentHash } from '../gluon-router/gluon-router.js';\nimport '../gluon-keybinding/gluon-keybinding.js';\n\nconst fontNode = document.createElement('link');\nfontNode.href = 'https://fonts.googleapis.com/css?family=Open+Sans+Condensed:700';\nfontNode.rel = 'stylesheet';\ndocument.head.appendChild(fontNode);\n\nconst styleText = document.createTextNode(`\n  /* SLIDEM SHARED STYLE */\n  slidem-deck slidem-slide {\n    font-family: 'Open Sans Condensed', sans-serif;\n    font-size: 56px;\n    line-height: 1;\n  }\n  slidem-deck slidem-slide h1,\n  slidem-deck slidem-slide h2,\n  slidem-deck slidem-slide h3,\n  slidem-deck slidem-slide h4,\n  slidem-deck slidem-slide h5,\n  slidem-deck slidem-slide h6,\n  slidem-deck slidem-slide p{\n    margin-top: 0px;\n    margin-bottom: 0px;\n  }\n  slidem-deck slidem-slide a {\n    color: inherit;\n    text-decoration: none;\n  }\n  slidem-deck slidem-slide slidem-reveal {\n    display: inherit;\n    opacity: 0;\n    transition: opacity 0.2s;\n  }\n  slidem-deck slidem-slide slidem-reveal[revealed] {\n    opacity: 1;\n  }\n`);\n\nconst styleNode = document.createElement('style');\nstyleNode.appendChild(styleText);\ndocument.head.appendChild(styleNode);\n\nclass SlidemDeck extends GluonElement {\n  get template() {\n    return html`\n      <div class=\"fontLoader\">a</div>\n      <div class=\"slides\">\n        <slot id=\"slides\"></slot>\n      </div>\n      <div id=\"progress\"></div>\n      <div id=\"forward\">\n        <gluon-keybinding key=\"ArrowRight\"></gluon-keybinding>\n      </div>\n      <div id=\"backward\">\n        <gluon-keybinding key=\"ArrowLeft\"></gluon-keybinding>\n      </div>\n      <style>\n        :host {\n          display: block;\n          overflow: hidden;\n          position: absolute;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n        }\n        .fontLoader {\n          position: absolute;\n          top: -9999px;\n          left: -99999px;\n          font-family: 'Open Sans Condensed', sans-serif;\n        }\n        .slides {\n          height: 100%;\n          width: 100%;\n        }\n        #progress {\n          position: absolute;\n          bottom: 0px;\n          left: 0;\n          right: 0;\n          height: 50px;\n          text-align: center;\n          display: flex;\n          flex-flow: row;\n          justify-content: center;\n        }\n        #progress div {\n          height: 8px;\n          width: 8px;\n          border-radius: 50%;\n          border: 2px solid white;\n          margin-left: 6px;\n          margin-right: 6px;\n          background: transparent;\n          transition: background 0.2s;\n        }\n        #progress div.active {\n          background: white;\n        }\n        #forward {\n          right: 0;\n        }\n        #backward {\n          left: 0;\n        }\n        #forward, #backward {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          width: 20%;\n        }\n        #forward:hover, #backward:hover {\n          background: rgba(255,255,255,0.1);\n        }\n      </style>\n    `;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.slides = Array.from(this.getElementsByTagName('slidem-slide'));\n    this.slides.forEach(slide => {\n      slide._steps = Array.from(slide.getElementsByTagName('slidem-reveal'));\n      this.$.progress.appendChild(document.createElement('div'));\n    });\n\n    onRouteChange(() => {\n      if (this.previousSlide !== undefined) {\n        this.slides[this.previousSlide].active = false;\n        this.$.progress.children[this.previousSlide].classList.remove('active');\n      }\n\n      this.slides[this.currentSlide].active = true;\n      this.slides[this.currentSlide].step = this.currentStep + 1;\n      this.$.progress.children[this.currentSlide].classList.add('active');\n\n      this.previousSlide = this.currentSlide;\n    });\n\n    this.$.forward.onclick = () => {\n      if (this.slides[this.currentSlide].step <= this.slides[this.currentSlide].reveals.length) {\n        window.history.pushState({}, '', `${currentPath()}#slide-${this.currentSlide + 1}/step-${this.slides[this.currentSlide].step + 1}`);\n        window.dispatchEvent(new Event('location-changed'));\n      } else if (this.currentSlide < this.slides.length - 1) {\n        window.history.pushState({}, '', `${currentPath()}#slide-${this.currentSlide + 2}/step-1`);\n        window.dispatchEvent(new Event('location-changed'));\n      }\n    };\n\n    this.$.backward.onclick = () => {\n      if (this.slides[this.currentSlide].step > 1) {\n        window.history.pushState({}, '', `${currentPath()}#slide-${this.currentSlide + 1}/step-${this.slides[this.currentSlide].step - 1}`);\n        window.dispatchEvent(new Event('location-changed'));\n      } else if (this.currentSlide > 0) {\n        window.history.pushState({}, '', `${currentPath()}#slide-${this.currentSlide}/step-${this.slides[this.currentSlide - 1].reveals.length + 1}`);\n        window.dispatchEvent(new Event('location-changed'));\n      }\n    };\n\n    this.removeAttribute('loading');\n    setTimeout(() => {\n      window.dispatchEvent(new Event('location-changed'));\n    }, 200);\n  }\n\n  get currentSlide() {\n    return (currentHash().match(/(?:slide-(\\d+))?(?:\\/step-(\\d+|Infinity))?/)[1] || 1) - 1;\n  }\n  get currentStep() {\n    return (currentHash().match(/(?:slide-(\\d+))?(?:\\/step-(\\d+|Infinity))?/)[2] || 1) - 1;\n  }\n}\n\ncustomElements.define(SlidemDeck.is, SlidemDeck);\n"]}