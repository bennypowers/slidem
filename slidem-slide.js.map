{"version":3,"sources":["slidem-slide.js"],"names":["GluonElement","html","SlidemSlide","template","connectedCallback","getAttribute","match","style","background","backgroundImage","textNodes","Array","from","querySelectorAll","forEach","fontWeight","fontStyle","textTransform","textAlign","lineHeight","color","layoutNodes","getElementsByTagName","display","justifyContent","alignItems","reveals","observedAttributes","attributeChangedCallback","length","setAttribute","__setStep","__rescale","step","active","removeAttribute","opacity","parseFloat","window","getComputedStyle","getPropertyValue","$","content","clientWidth","fontSize","Math","floor","customElements","define","is"],"mappings":"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","file":"slidem-slide.js","sourcesContent":["import { GluonElement, html } from '../gluonjs/gluon.js';\n\nclass SlidemSlide extends GluonElement {\n  get template() {\n    return html`\n      <div id=\"content\"><slot id=\"slot\"></slot></div>\n      <style>\n        :host {\n          position: absolute;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          display: none;\n          overflow: hidden;\n          justify-content: center;\n          align-items: center;\n          background-size: cover;\n        }\n        :host([active]) {\n          display: flex;\n        }\n        :host([active].animate-in) {\n          z-index: 2;\n        }\n        :host([active].animate-out) {\n          z-index: 0;\n        }\n        :host([slide-in]), :host([slide-out]), :host([zoom]) #content {\n          animation-duration: 0.4s;\n          animation-fill-mode: both;\n          animation-timing-function: ease-in-out;\n        }\n\n        @keyframes slide-in-in {\n          from {\n            transform: translateX(100vw);\n          }\n          to {\n            transform: translateX(0);\n          }\n        }\n\n        @keyframes slide-in-out {\n          from {\n            transform: translateX(0);\n          }\n          to {\n            transform: translateX(100vw);\n          }\n        }\n\n        :host([slide-in].animate-forward.animate-in) {\n          animation-name: slide-in-in;\n        }\n        :host([slide-in].animate-backward.animate-out) {\n          animation-name: slide-in-out;\n          z-index: 3;\n        }\n\n\n        @keyframes slide-out-in {\n          from {\n            transform: translateX(0);\n          }\n          to {\n            transform: translateX(-100vw);\n          }\n        }\n\n        @keyframes slide-out-out {\n          from {\n            transform: translateX(-100vw);\n          }\n          to {\n            transform: translateX(0);\n          }\n        }\n\n        :host([slide-out].animate-forward.animate-out) {\n          animation-name: slide-out-in;\n          z-index: 3;\n        }\n        :host([slide-out].animate-backward.animate-in) {\n          animation-name: slide-out-out;\n        }\n\n        @keyframes zoom-in {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n\n        @keyframes zoom-out {\n          from {\n            opacity: 1;\n            transform: scale(1);\n          }\n          to {\n            opacity: 0;\n            transform: scale(0);\n          }\n        }\n\n        :host([zoom].animate-in) #content {\n          animation-name: zoom-in;\n        }\n        :host([zoom].animate-out) #content {\n          animation-name: zoom-out;\n        }\n\n        #content {\n          width: 100%;\n          max-width: 1080px;\n          max-height: 760px;\n        }\n        :host(:not([center])) #content {\n          height: 100%;\n        }\n      </style>\n    `;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    const background = this.getAttribute('background');\n    if (background) {\n      if (background.match(/^--[a-zA-Z-]*$/)) {\n        this.style.background = `var(${background})`;\n      } else if (background.match(/^http/) || background.match(/^\\//)) {\n        const darken = this.getAttribute('darken-background');\n        let image = background;\n        if (darken) {\n          image = `linear-gradient(rgba(0,0,0,${darken}), rgba(0,0,0,${darken})), url(${image})`;\n        }\n        this.style.backgroundImage = image;\n      } else {\n        this.style.background = background;\n      }\n    }\n\n    this.textNodes = Array.from(this.querySelectorAll('h1, h2, h3, h4, h5, h6, p'));\n    this.textNodes.forEach(textNode => {\n      if (textNode.getAttribute('bold') !== null) {\n        textNode.style.fontWeight = 'bold';\n      }\n      if (textNode.getAttribute('italic') !== null) {\n        textNode.style.fontStyle = 'italic';\n      }\n      if (textNode.getAttribute('uppercase') !== null) {\n        textNode.style.textTransform = 'uppercase';\n      }\n      if (textNode.getAttribute('center') !== null) {\n        textNode.style.textAlign = 'center';\n      }\n      if (textNode.getAttribute('line-height') !== null) {\n        textNode.style.lineHeight = textNode.getAttribute('line-height');\n      }\n      const color = textNode.getAttribute('color');\n      if (color !== null) {\n        if (color.match(/^--[a-zA-Z-]*$/)) {\n          textNode.style.color = `var(${color})`;\n        } else {\n          textNode.style.color = color;\n        }\n      }\n    });\n\n    this.layoutNodes = Array.from(this.getElementsByTagName('div'));\n    this.layoutNodes.forEach(layoutNode => {\n      if (layoutNode.getAttribute('center') !== null) {\n        layoutNode.style.display = 'flex';\n        layoutNode.style.justifyContent = 'center';\n        layoutNode.style.alignItems = 'center';\n      }\n    });\n\n    this.reveals = Array.from(this.querySelectorAll('[reveal]'));\n  }\n  static get observedAttributes() {\n    return ['step', 'active'];\n  }\n  attributeChangedCallback(attr, oldVal, newVal) {\n    if (attr === 'step') {\n      const step = Number(newVal);\n      if (step > this.reveals.length + 1) {\n        this.setAttribute('step', this.reveals.length + 1);\n        return;\n      }\n      this.__setStep(step);\n    }\n    if (attr === 'active') {\n      if (newVal !== null) {\n        this.__rescale();\n      }\n    }\n  }\n\n  set step(step) {\n    this.setAttribute('step', step);\n  }\n  get step() {\n    return Number(this.getAttribute('step')) || 1;\n  }\n\n  set active(active) {\n    if (active) {\n      this.setAttribute('active', '');\n    } else {\n      this.removeAttribute('active');\n    }\n  }\n  get active() {\n    return this.getAttribute('active') !== null;\n  }\n\n  __setStep(step) {\n    this.reveals.forEach((reveal, i) => {\n      if (i < step - 1) {\n        reveal.style.opacity = 1;\n      } else {\n        reveal.style.opacity = 0;\n      }\n    });\n  }\n\n  __rescale() {\n    this.textNodes.forEach(textNode => {\n      if (textNode.getAttribute('fit') !== null) {\n        textNode.style.display = 'table';\n        const refFontSize = parseFloat(window.getComputedStyle(textNode, null).getPropertyValue('font-size'));\n        const refWidth = this.$.content.clientWidth;\n        textNode.style.fontSize = `${Math.floor(refFontSize * refWidth / textNode.clientWidth) - 1}px`;\n      }\n    });\n  }\n}\n\ncustomElements.define(SlidemSlide.is, SlidemSlide);\n"]}