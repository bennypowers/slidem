{"version":3,"sources":["slidem-slide.js"],"names":["GluonElement","html","SlidemSlide","template","connectedCallback","getAttribute","match","style","background","backgroundImage","textNodes","Array","from","querySelectorAll","forEach","fontWeight","fontStyle","textTransform","textAlign","lineHeight","color","reveals","getElementsByTagName","observedAttributes","attributeChangedCallback","length","setAttribute","__setStep","__rescale","step","active","removeAttribute","display","parseFloat","window","getComputedStyle","getPropertyValue","$","content","clientWidth","fontSize","customElements","define","is"],"mappings":"AAAA,OAASA,YAAT,CAAuBC,IAAvB,KAAmC,qBAAnC,CAEA,KAAMC,YAAN,QAA0BF,aAAa,CACrC,GAAIG,SAAJ,EAAe,CACb,MAAOF,KAAK;;;;;;;;;;;;;;;;;;;;;;KAuBb,CACDG,mBAAoB,CAClB,MAAMA,iBAAN,EADkB,CAElB,KAAM,GAAa,KAAKC,YAAL,CAAkB,YAAlB,CAAnB,CACA,KACE,GAAI,EAAWC,KAAX,CAAiB,gBAAjB,CAAJ,CACE,KAAKC,KAAL,CAAWC,UAAX,CAAyB,OAAD,CAAkB,GAD5C,KAEO,IAAI,EAAWF,KAAX,CAAiB,OAAjB,GAA6B,EAAWA,KAAX,CAAiB,KAAjB,CAAjC,CAA0D,CAC/D,KAAM,GAAS,KAAKD,YAAL,CAAkB,mBAAlB,CAAf,CACA,GAAI,IAAJ,CAF+D,IAI7D,EAAS,8BAAD,CAAqC,iBAArC,CAA4D,WAA5D,CAA4E,GAJvB,EAM/D,KAAKE,KAAL,CAAWE,eAAX,EACD,CAPM,IAQL,MAAKF,KAAL,CAAWC,UAAX,EARK,CAYT,KAAKE,SAAL,CAAiBC,MAAMC,IAAN,CAAW,KAAKC,gBAAL,CAAsB,2BAAtB,CAAX,CAlBC,CAmBlB,KAAKH,SAAL,CAAeI,OAAf,CAAuB,KAAY,CACK,IAAlC,KAAST,YAAT,CAAsB,MAAtB,CAD6B,GAE/B,EAASE,KAAT,CAAeQ,UAAf,CAA4B,MAFG,EAIO,IAApC,KAASV,YAAT,CAAsB,QAAtB,CAJ6B,GAK/B,EAASE,KAAT,CAAeS,SAAf,CAA2B,QALI,EAOU,IAAvC,KAASX,YAAT,CAAsB,WAAtB,CAP6B,GAQ/B,EAASE,KAAT,CAAeU,aAAf,CAA+B,WARA,EAUO,IAApC,KAASZ,YAAT,CAAsB,QAAtB,CAV6B,GAW/B,EAASE,KAAT,CAAeW,SAAf,CAA2B,QAXI,EAaY,IAAzC,KAASb,YAAT,CAAsB,aAAtB,CAb6B,GAc/B,EAASE,KAAT,CAAeY,UAAf,CAA4B,EAASd,YAAT,CAAsB,aAAtB,CAdG,EAgBjC,KAAM,GAAQ,EAASA,YAAT,CAAsB,OAAtB,CAAd,CACc,IAAV,IAjB6B,GAkB3B,EAAMC,KAAN,CAAY,gBAAZ,CAlB2B,CAmB7B,EAASC,KAAT,CAAea,KAAf,CAAwB,OAAD,CAAa,GAnBP,CAqB7B,EAASb,KAAT,CAAea,KAAf,EArB6B,CAwBlC,CAxBD,CAnBkB,CA6ClB,KAAKC,OAAL,CAAeV,MAAMC,IAAN,CAAW,KAAKU,oBAAL,CAA0B,eAA1B,CAAX,CAChB,CACD,UAAWC,mBAAX,EAAgC,CAC9B,uBACD,CACDC,+BAA+C,CAC7C,GAAa,MAAT,IAAJ,CAAqB,CACnB,KAAM,KAAN,CACA,GAAI,EAAO,KAAKH,OAAL,CAAaI,MAAb,CAAsB,CAAjC,CAEE,WADA,MAAKC,YAAL,CAAkB,MAAlB,CAA0B,KAAKL,OAAL,CAAaI,MAAb,CAAsB,CAAhD,CACA,CAEF,KAAKE,SAAL,GACD,CACY,QAAT,IATyC,EAU5B,IAAX,IAVuC,EAWzC,KAAKC,SAAL,EAGL,CAED,GAAIC,KAAJ,GAAe,CACb,KAAKH,YAAL,CAAkB,MAAlB,GACD,CACD,GAAIG,KAAJ,EAAW,CACT,MAAO,CAAO,KAAKxB,YAAL,CAAkB,MAAlB,CAAP,EAAqC,CAC7C,CAED,GAAIyB,OAAJ,GAAmB,GAEf,KAAKJ,YAAL,CAAkB,QAAlB,CAA4B,EAA5B,CAFe,CAIf,KAAKK,eAAL,CAAqB,QAArB,CAEH,CACD,GAAID,OAAJ,EAAa,CACX,MAAuC,KAAhC,QAAKzB,YAAL,CAAkB,QAAlB,CACR,CAEDsB,YAAgB,CACd,KAAKN,OAAL,CAAaP,OAAb,CAAqB,OAAe,CAC9B,EAAI,EAAO,CADmB,CAEhC,EAAOY,YAAP,CAAoB,UAApB,CAAgC,EAAhC,CAFgC,CAIhC,EAAOK,eAAP,CAAuB,UAAvB,CAEH,CAND,CAOD,CAEDH,WAAY,CACV,KAAKlB,SAAL,CAAeI,OAAf,CAAuB,KAAY,CACjC,GAAqC,IAAjC,KAAST,YAAT,CAAsB,KAAtB,CAAJ,CAA2C,CACzC,EAASE,KAAT,CAAeyB,OAAf,CAAyB,OADgB,CAEzC,KAAM,GAAcC,WAAWC,OAAOC,gBAAP,GAAkC,IAAlC,EAAwCC,gBAAxC,CAAyD,WAAzD,CAAX,CAApB,CACM,EAAW,KAAKC,CAAL,CAAOC,OAAP,CAAeC,WADhC,CAEA,EAAShC,KAAT,CAAeiC,QAAf,CAA0B,IAAyB,EAASD,WAAlC,CAAgD,IAC3E,CACF,CAPD,CAQD,CAjIoC,CAoIvCE,eAAeC,MAAf,CAAsBxC,YAAYyC,EAAlC,CAAsCzC,WAAtC,C","file":"slidem-slide.js","sourcesContent":["import { GluonElement, html } from '../gluonjs/gluon.js';\n\nclass SlidemSlide extends GluonElement {\n  get template() {\n    return html`\n      <div id=\"content\"><slot id=\"slot\"></slot></div>\n      <style>\n        :host(:not([active])) {\n          display: none;\n        }\n        :host {\n          display: flex;\n          overflow: hidden;\n          height: 100%;\n          width: 100%;\n          justify-content: center;\n          align-items: center;\n          background-size: cover;\n        }\n        #content {\n          width: 100%;\n          max-width: 1080px;\n          height: 100%;\n          max-height: 760px;\n        }\n      </style>\n    `;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    const background = this.getAttribute('background');\n    if (background) {\n      if (background.match(/^--[a-zA-Z-]*$/)) {\n        this.style.background = `var(${background})`;\n      } else if (background.match(/^http/) || background.match(/^\\//)) {\n        const darken = this.getAttribute('darken-background');\n        let image = background;\n        if (darken) {\n          image = `linear-gradient(rgba(0,0,0,${darken}), rgba(0,0,0,${darken})), url(${image})`;\n        }\n        this.style.backgroundImage = image;\n      } else {\n        this.style.background = background;\n      }\n    }\n\n    this.textNodes = Array.from(this.querySelectorAll('h1, h2, h3, h4, h5, h6, p'));\n    this.textNodes.forEach(textNode => {\n      if (textNode.getAttribute('bold') !== null) {\n        textNode.style.fontWeight = 'bold';\n      }\n      if (textNode.getAttribute('italic') !== null) {\n        textNode.style.fontStyle = 'italic';\n      }\n      if (textNode.getAttribute('uppercase') !== null) {\n        textNode.style.textTransform = 'uppercase';\n      }\n      if (textNode.getAttribute('center') !== null) {\n        textNode.style.textAlign = 'center';\n      }\n      if (textNode.getAttribute('line-height') !== null) {\n        textNode.style.lineHeight = textNode.getAttribute('line-height');\n      }\n      const color = textNode.getAttribute('color');\n      if (color !== null) {\n        if (color.match(/^--[a-zA-Z-]*$/)) {\n          textNode.style.color = `var(${color})`;\n        } else {\n          textNode.style.color = color;\n        }\n      }\n    });\n\n    this.reveals = Array.from(this.getElementsByTagName('slidem-reveal'));\n  }\n  static get observedAttributes() {\n    return ['step', 'active'];\n  }\n  attributeChangedCallback(attr, oldVal, newVal) {\n    if (attr === 'step') {\n      const step = Number(newVal);\n      if (step > this.reveals.length + 1) {\n        this.setAttribute('step', this.reveals.length + 1);\n        return;\n      }\n      this.__setStep(step);\n    }\n    if (attr === 'active') {\n      if (newVal !== null) {\n        this.__rescale();\n      }\n    }\n  }\n\n  set step(step) {\n    this.setAttribute('step', step);\n  }\n  get step() {\n    return Number(this.getAttribute('step')) || 1;\n  }\n\n  set active(active) {\n    if (active) {\n      this.setAttribute('active', '');\n    } else {\n      this.removeAttribute('active');\n    }\n  }\n  get active() {\n    return this.getAttribute('active') !== null;\n  }\n\n  __setStep(step) {\n    this.reveals.forEach((reveal, i) => {\n      if (i < step - 1) {\n        reveal.setAttribute('revealed', '');\n      } else {\n        reveal.removeAttribute('revealed');\n      }\n    });\n  }\n\n  __rescale() {\n    this.textNodes.forEach(textNode => {\n      if (textNode.getAttribute('fit') !== null) {\n        textNode.style.display = 'table';\n        const refFontSize = parseFloat(window.getComputedStyle(textNode, null).getPropertyValue('font-size'));\n        const refWidth = this.$.content.clientWidth;\n        textNode.style.fontSize = refFontSize * refWidth / textNode.clientWidth + 'px';\n      }\n    });\n  }\n}\n\ncustomElements.define(SlidemSlide.is, SlidemSlide);\n"]}